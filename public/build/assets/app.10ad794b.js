import{t as c}from"./functions.a23a3985.js";function u(t){t=t.replace(/^\s+|\s+$/g,""),t=t.toLowerCase();for(var i="\xE5\xE0\xE1\xE3\xE4\xE2\xE8\xE9\xEB\xEA\xEC\xED\xEF\xEE\xF2\xF3\xF6\xF4\xF9\xFA\xFC\xFB\xF1\xE7\xB7/_,:;",a="aaaaaaeeeeiiiioooouuuunc------",e=0,l=i.length;e<l;e++)t=t.replace(new RegExp(i.charAt(e),"g"),a.charAt(e));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+/g,"").replace(/-+$/g,""),t}function f(){$(document).on("click",".toggle-dark-mode-admin",function(){c($("#page-container"),{darkmode:"page-header-dark dark-mode sidebar-dark",lightmode:"light-mode"},{name:"theme",darkmodeValue:"dark-mode",lightmodeValue:"light-mode"})})}function p(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),One.helpersOnLoad("js-flatpickr"),$(document).on("focusout",".input-to-slugify",function(){let a=$(this).val(),e=u(a);$(".input-slug").val(e)});let t=document.getElementById("image");t&&(t.onchange=a=>{if(a.target.files.length>0){let e=URL.createObjectURL(a.target.files[0]),l=document.getElementById("image-preview");l.src=e}});let i=$(".show-password");i.length&&i.on("click",function(){let a=$(this).siblings("input"),e=a.attr("type")==="text"?"password":"text";a.attr("type",e)})}function b(t,i,a="..."){return t.length<i?t:t.substring(0,i)+a}function g(t){return[{value:0,class:"bg-gray text-gray-dark",text:"Draft"},{value:1,class:"bg-warning-light text-warning",text:"Pending"},{value:2,class:"bg-success-light text-success",text:"Published"}][t]}function h(){const t=document.getElementById("myChart");t!==null&&$.ajax({type:"GET",url:"/api/visitors/columns",success:function(i){let a="";i.forEach(function(n,o){a+=`<option value="${n}" ${n==="countryName"?"selected":""}>${n}</option>`});let e=$("#columns-list"),l=$("#pages-list");e.html(a);let s={columnSelected:"countryName",pagesList:l,visitsChart:null,ctx:t,page:1};r(s),e.on("change",function(){let n=$("option:selected",this).val();s.columnSelected=n,s.page=1,r(s)}),l.on("change",function(){let n=e.val(),o=$("option:selected",this).val();s.columnSelected=n,s.page=o,r(s)})}})}function r(t){$.ajax({type:"GET",url:`/api/stats/visitors/${t.columnSelected}?page=${t.page}`,success:function(i){if(t.page===1){let s="";for(let n=1;n<=i.last_page;n++)s+=`<option value="${n}">Page ${n}</option>`;t.pagesList.html(s)}let a=i.data,e=a.map(s=>s[t.columnSelected]),l=a.map(s=>s.visits);t.visitsChart&&t.visitsChart.destroy(),t.visitsChart=new Chart(t.ctx,{type:"bar",data:{labels:e,datasets:[{label:`Number of visits by ${t.columnSelected}`,data:l,borderWidth:1}]},options:{plugins:{zoom:{zoom:{drag:{enabled:!0},wheel:{enabled:!0},pinch:{enabled:!0},mode:"xy"}}}}})}})}function _(){$("#post_body").length!=0&&tinymce.init({selector:"textarea#post_body",plugins:"code link table lists codesample image preview pagebreak",toolbar:"code codesample link image | undo redo | formatselect| bold italic | alignleft aligncenter alignright | indent outdent | bullist numlist | table | pagebreak preview",pagebreak_separator:"<hr/>",height:700,fixed_toolbar_container:".tox-editor-header",codesample_languages:[{text:"Bash",value:"bash"},{text:"Typscript",value:"typscript"},{text:"Markdown",value:"markdown"},{text:"Pug",value:"pug"},{text:"Sass",value:"sass"},{text:"Yaml",value:"yaml"},{text:"SQL",value:"sql"},{text:"HTML/XML",value:"markup"},{text:"CSS",value:"css"},{text:"JavaScript",value:"javascript"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}]})}function v(){$(".js-select2").length!=0&&One.helpersOnLoad(["jq-select2"])}function y(){if($("#posts").length&&d({first_time:!0,id:"#posts",method:"POST",url:"/api/posts",columns:[{data:"id",name:"id",title:"Actions",className:"text-center",render:function(i,a,e,l){return`
                        <div class="btn-group">
                            <button type="button" class="btn btn-sm btn-outline-secondary js-bs-tooltip-enabled" data-bs-toggle="tooltip" aria-label="Edit Client" data-bs-original-title="Edit Client">
                                <a href="/blog/${e.slug}" target="_blank" class="link-dark">
                                    <i class="fa fa-fw fa-eye"></i>
                                </a>
                            </button>
                            <button type="button" class="btn btn-sm btn-outline-secondary js-bs-tooltip-enabled" data-bs-toggle="tooltip" aria-label="Edit Client" data-bs-original-title="Edit Client">
                                <a href="/admin/posts/edit/${e.slug}" target="_blank" class="link-dark">
                                    <i class="fa fa-fw fa-pencil-alt"></i>
                                </a>
                            </button>
                        </div>
                    `}},{data:"id",name:"id",title:"ID",className:"text-center"},{data:"title",name:"title",title:"Title",className:"fw-semibold fs-sm",render:function(i,a,e,l){return`<span data-bs-toggle="tooltip" title="${e.title}">${b(e.title,20)}</span>`}},{data:"status",name:"status",title:"Status",render:function(i,a,e,l){let s=g(e.status);return`<span class="fs-xs fw-semibold d-inline-block py-1 px-3 rounded-pill ${s.class}">${s.text}</span`}},{data:"featured",name:"featured",title:"Featured",className:"fs-sm",render:function(i,a,e,l){return`<div class="item item-tiny item-circle mx-auto mb-3
                        ${e.featured?"bg-success":"bg-danger"}"></div>`}},{data:"views",name:"views",title:'<i class="fa-solid fa-eye"></i>',className:"text-center"},{data:"likes",name:"likes",title:'<i class="fa-solid fa-thumbs-up"></i>',className:"text-center"},{data:"tags_count",name:"tags_count",title:"tags",className:"text-center",searchable:!1},{data:"published_at",name:"published_at",title:"Published @",className:"text-center fs-sm",render:function(i,a,e,l){let s=moment(e.published_at).fromNow();return`<span title="${moment(e.published_at).format("Y-M-d hh:mm")}">${s}</span>`}},{data:"created_at",name:"created_at",title:"Created @",clasxsName:"text-center fs-sm",render:function(i,a,e,l){let s=moment(e.created_at).fromNow();return`<span title="${moment(e.created_at).format("Y-M-d hh:mm")}">${s}</span>`}},{data:"updated_at",name:"updated_at",title:"Updated @",className:"text-center fs-sm",render:function(i,a,e,l){let s=moment(e.updated_at).fromNow();return`<span title="${moment(e.updated_at).format("Y-M-d hh:mm")}">${s}</span>`}},{data:"deleted_at",name:"deleted_at",title:"Active",className:"fs-sm",render:function(i,a,e,l){return`<div class="item item-tiny item-circle mx-auto mb-3 ${e.deleted_at?"bg-danger":"bg-success"}"></div>`}}]}),$("#tags").length&&d({first_time:!0,id:"#tags",method:"POST",url:"/api/tags",columns:[{data:"id",name:"id",title:"Actions",className:"text-center",render:function(i,a,e,l){return`
                        <div class="btn-group">
                            <button type="button" class="btn btn-sm btn-outline-secondary js-bs-tooltip-enabled" data-bs-toggle="tooltip" aria-label="Edit Client" data-bs-original-title="Edit Client">
                                <a href="/tags/${e.slug}" target="_blank" class="link-dark">
                                    <i class="fa fa-fw fa-eye"></i>
                                </a>
                            </button>
                            <button type="button" class="btn btn-sm btn-outline-secondary js-bs-tooltip-enabled" data-bs-toggle="tooltip" aria-label="Edit Client" data-bs-original-title="Edit Client">
                                <a href="/admin/tags/edit/${e.slug}" target="_blank" class="link-dark">
                                    <i class="fa fa-fw fa-pencil-alt"></i>
                                </a>
                            </button>
                        </div>
                    `}},{data:"id",name:"id",title:"ID",className:"text-center"},{data:"name",name:"name",title:"Name",className:"fw-semibold fs-sm"},{data:"slug",name:"slug",title:"Slug",className:"fw-semibold fs-sm"},{data:"color",name:"color",title:"Color",className:"fw-semibold fs-sm",render:function(i,a,e,l){return`<div class="item item-tiny item-circle mx-auto mb-3"
                             style="background-color: ${e.color}"></div>`}},{data:"posts_count",name:"posts_count",title:"Posts",className:"fw-semibold fs-sm",searchable:!1},{data:"created_at",name:"created_at",title:"created @",className:"text-center fs-sm",render:function(i,a,e,l){let s=moment(e.created_at).fromNow();return`<span title="${moment(e.created_at).format("Y-M-d hh:mm")}">${s}</span>`}},{data:"deleted_at",name:"deleted_at",title:"Active",className:"fs-sm",render:function(i,a,e,l){return`<div class="item item-tiny item-circle mx-auto mb-3 ${e.deleted_at?"bg-danger":"bg-success"}"></div>`}}]}),$("#visitors").length&&d({first_time:!0,id:"#visitors",method:"POST",url:"/api/visitors",columns:[{data:"id",name:"id",title:"ID",className:"text-center"},{data:"ip",name:"ip",title:"IP",className:"text-center"},{data:"url",name:"url",title:"URL",className:"text-left"},{data:"updated_at",name:"updated_at",title:"updated @",className:"text-center fs-sm",render:function(i,a,e,l){let s=moment(e.updated_at).fromNow();return`<span title="${moment(e.updated_at).format("Y-M-d hh:mm")}">${s}</span>`}},{data:"countryCode",name:"countryCode",title:"Country Code",className:"fw-semibold fs-sm"},{data:"countryName",name:"countryName",title:"Country Name",className:"fw-semibold fs-sm"},{data:"regionName",name:"regionName",title:"Region Name",className:"fw-semibold fs-sm"},{data:"cityName",name:"cityName",title:"City Name",className:"fw-semibold fs-sm"},{data:"latitude",name:"latitude",title:"latitude",className:"fw-semibold fs-sm"},{data:"longitude",name:"longitude",title:"longitude",className:"fw-semibold fs-sm"},{data:"regionCode",name:"regionCode",title:"Region Code",className:"fw-semibold fs-sm"},{data:"zipCode",name:"zipCode",title:"Zip Code",className:"fw-semibold fs-sm"},{data:"isoCode",name:"isoCode",title:"Iso Code",className:"fw-semibold fs-sm"},{data:"postalCode",name:"postalCode",title:"Postal Code",className:"fw-semibold fs-sm"},{data:"metroCode",name:"metroCode",title:"Metro Code",className:"fw-semibold fs-sm"},{data:"areaCode",name:"areaCode",title:"Area Code",className:"fw-semibold fs-sm"},{data:"timezone",name:"timezone",title:"timezone",className:"fw-semibold fs-sm"},{data:"driver",name:"driver",title:"driver",className:"fw-semibold fs-sm"}]}),$("#messages").length){let i=d({first_time:!0,id:"#messages",method:"POST",url:"/api/messages",columns:[{data:"id",name:"id",title:"Actions",className:"text-center",render:function(a,e,l,s){return`
                        <div class="btn-group">
                            <button type="button" class="btn btn-sm js-bs-tooltip-enabled display-email-details">
                                <i class="fa fs-3 fa-eye"></i>
                            </button>
                        </div>
                    `}},{data:"id",name:"id",title:"ID",className:"text-center"},{data:"name",name:"name",title:"Name",className:"text-center"},{data:"email",name:"email",title:"Email",className:"text-center"},{data:"body",name:"body",title:"Body",className:"text-center",render:function(a,e,l,s){return a.substring(0,30)+"..."}},{data:"created_at",name:"created_at",title:"created @",className:"text-center fs-sm",render:function(a,e,l,s){let n=moment(l.created_at).fromNow();return`<span title="${moment(l.created_at).format("Y-M-d hh:mm")}">${n}</span>`}}]});$("#messages").on("click",".display-email-details",function(a){const e=$(this).closest("tr"),l=i.row(e).data();let s=moment(l.created_at),n=`
            <div class="modal modal-email-details" tabindex="-1">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">${l.name}</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="mb-3">
                                <label for="exampleFormControlInput1" class="form-label">Sender : ${l.name}</label>
                            </div>
                            <div class="mb-3">
                                <label for="exampleFormControlInput1" class="form-label">Email : ${l.email}</label>
                            </div>
                            <div class="mb-3">
                                <label for="exampleFormControlInput1" class="form-label">Message : <br/>${l.body}</label>
                            </div>
                            <div class="mb-3">
                                <label for="exampleFormControlInput1" class="form-label">Created @ : ${s.format("Y-M-d hh:mm")} / ${s.fromNow()}</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-backdrop fade show"></div>`;$("body").append(n);let o=$(".modal-email-details");$(".btn-close").add(".modal-email-details").on("click",function(m){m.target!=o[0]&&m.target!=$(".btn-close")[0]||(o.remove(),$(".modal-backdrop").remove())}),o.show()})}}function d(t){let i=new DataTable(t.id,{pageLength:50,lengthMenu:[5,10,25,50,75,100,200],language:{fnInfoCallback:function(a,e,l,s,n,o){return`${e} <i class="fa-solid fa-arrow-right-long"></i> ${l} | ${n} (Total : ${s})`},paginate:{first:'<i class="fa fa-angle-double-left"></i>',previous:'<i class="fa fa-angle-left"></i>',next:'<i class="fa fa-angle-right"></i>',last:'<i class="fa fa-angle-double-right"></i>'},pagingType:"full_numbers",pageLength:5},searching:!0,responsive:!0,pagingType:"full_numbers",processing:!0,serverSide:!0,ajax:{type:t.method,url:t.url,data:function(a){a._token=$('meta[name="csrf-token"]').attr("content"),a.first_time=t.first_time}},columns:t.columns,initComplete:function(a,e){delete t.first_time,t.onComplete&&t.onComplete(a,e)}});return $(".btn-refresh").on("click",function(a){i.ajax.reload(null,!1)}),i}$(function(){try{f(),_(),v(),p(),y(),h()}catch{}});
